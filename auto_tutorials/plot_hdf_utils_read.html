

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Utilities for reading Pycroscopy HDF5 files &mdash; pycroscopy 0.60.0 documentation</title>
  

  
  
  
  

  

  
  
    

  

  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/gallery.css" type="text/css" />
    <link rel="author" title="About these documents" href="../about.html" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" /> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> pycroscopy
          

          
            
            <img src="../_static/logo_v01.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                0.60.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../about.html">Pycroscopy</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting_started.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../install.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../external_guides.html">Tutorials on Basics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../package_organization.html">Package Organization</a></li>
<li class="toctree-l1"><a class="reference internal" href="../auto_examples/index.html">Examples &amp; Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../data_format.html">Pycroscopy Data and File Format</a></li>
<li class="toctree-l1"><a class="reference internal" href="../translators.html">Data Translators</a></li>
<li class="toctree-l1"><a class="reference internal" href="../papers_conferences.html">Papers / Conferences</a></li>
<li class="toctree-l1"><a class="reference internal" href="../faq.html">Frequently asked questions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../contact.html">Contact us</a></li>
<li class="toctree-l1"><a class="reference internal" href="../credits.html">Credits</a></li>
<li class="toctree-l1"><a class="reference internal" href="../credits.html#acknowledgements">Acknowledgements</a></li>
<li class="toctree-l1"><a class="reference internal" href="../whats_new.html">What’s New</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api.html">API Reference</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">pycroscopy</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
      <li>Utilities for reading Pycroscopy HDF5 files</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/auto_tutorials/plot_hdf_utils_read.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="utilities-for-reading-pycroscopy-hdf5-files">
<span id="sphx-glr-auto-tutorials-plot-hdf-utils-read-py"></span><h1>Utilities for reading Pycroscopy HDF5 files<a class="headerlink" href="#utilities-for-reading-pycroscopy-hdf5-files" title="Permalink to this headline">¶</a></h1>
<p><strong>Suhas Somnath</strong></p>
<p>4/18/2018</p>
<p><strong>This document illustrates the many handy functions in pycroscopy.hdf_utils that significantly simplify reading data
and information in pycroscopy formatted HDF5 files</strong></p>
<div class="section" id="introduction">
<h2>Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h2>
<p>Pycroscopy uses a data-centric approach to data analysis and processing meaning that results from all data analysis
and processing are written to the same h5 file that contains the recorded measurements. The Hierarchical Data Format
(HDF5) allows data, whether it is raw measured data or results of analysis, to be stored in multiple datasets within
the same file in a tree-like manner. Certain rules and considerations have been made in pycroscopy to ensure
consistent and easy access to any data.</p>
<p>The h5py python package provides great functions to create, read, and manage data in HDF5 files. In
pycroscopy.hdf_utils, we have added functions that facilitate scientifically relevant, or pycroscopy specific
functionality such as checking if a dataset is a Main dataset, reshaping to / from the original N dimensional form of
the data, etc. Due to the wide breadth of the functions in <code class="docutils literal notranslate"><span class="pre">hdf_utils</span></code>, the guide for hdf_utils will be split in two
parts - one that focuses on functions that facilitate reading and one that facilitate writing of data. The following
guide provides examples of how, and more importantly when, to use functions in <code class="docutils literal notranslate"><span class="pre">pycroscopy.hdf_utils</span></code> for various
scenarios.</p>
</div>
<div class="section" id="recommended-pre-requisite-reading">
<h2>Recommended pre-requisite reading<a class="headerlink" href="#recommended-pre-requisite-reading" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><a class="reference external" href="https://pycroscopy.github.io/pycroscopy/data_format.html">pycroscopy data format</a></li>
<li><a class="reference external" href="https://pycroscopy.github.io/pycroscopy/auto_examples/cookbooks/plot_h5py.html">Crash course on HDF5 and h5py</a></li>
<li>Utilities for <a class="reference external" href="https://pycroscopy.github.io/pycroscopy/auto_examples/cookbooks/plot_hdf_utils_write.html">writing</a>
HDF5 files in pycroscopy</li>
</ul>
</div>
<div class="section" id="import-all-necessary-packages">
<h2>Import all necessary packages<a class="headerlink" href="#import-all-necessary-packages" title="Permalink to this headline">¶</a></h2>
<p>Before we begin demonstrating the numerous functions in <code class="docutils literal notranslate"><span class="pre">pycroscopy.hdf_utils</span></code>, we need to import the necessary
packages. Here are a list of packages besides pycroscopy that will be used in this example:</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">h5py</span></code> - to open and close the file</li>
<li><code class="docutils literal notranslate"><span class="pre">wget</span></code> - to download the example data file</li>
<li><code class="docutils literal notranslate"><span class="pre">numpy</span></code> - for numerical operations on arrays in memory</li>
<li><code class="docutils literal notranslate"><span class="pre">matplotlib</span></code> - basic visualization of data</li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">__future__</span> <span class="kn">import</span> <span class="n">print_function</span><span class="p">,</span> <span class="n">division</span><span class="p">,</span> <span class="n">unicode_literals</span>
<span class="kn">import</span> <span class="nn">os</span>
<span class="c1"># Warning package in case something goes wrong</span>
<span class="kn">from</span> <span class="nn">warnings</span> <span class="kn">import</span> <span class="n">warn</span>
<span class="c1"># Package for downloading online files:</span>
<span class="k">try</span><span class="p">:</span>
    <span class="c1"># This package is not part of anaconda and may need to be installed.</span>
    <span class="kn">import</span> <span class="nn">wget</span>
<span class="k">except</span> <span class="ne">ImportError</span><span class="p">:</span>
    <span class="n">warn</span><span class="p">(</span><span class="s1">&#39;wget not found.  Will install with pip.&#39;</span><span class="p">)</span>
    <span class="kn">import</span> <span class="nn">pip</span>
    <span class="n">pip</span><span class="o">.</span><span class="n">main</span><span class="p">([</span><span class="s1">&#39;install&#39;</span><span class="p">,</span> <span class="s1">&#39;wget&#39;</span><span class="p">])</span>
    <span class="kn">import</span> <span class="nn">wget</span>
<span class="kn">import</span> <span class="nn">h5py</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="kn">as</span> <span class="nn">plt</span>
<span class="c1"># Finally import pycroscopy.</span>
<span class="k">try</span><span class="p">:</span>
    <span class="kn">import</span> <span class="nn">pycroscopy</span> <span class="kn">as</span> <span class="nn">px</span>
<span class="k">except</span> <span class="ne">ImportError</span><span class="p">:</span>
    <span class="n">warn</span><span class="p">(</span><span class="s1">&#39;pycroscopy not found.  Will install with pip.&#39;</span><span class="p">)</span>
    <span class="kn">import</span> <span class="nn">pip</span>
    <span class="n">pip</span><span class="o">.</span><span class="n">main</span><span class="p">([</span><span class="s1">&#39;install&#39;</span><span class="p">,</span> <span class="s1">&#39;pycroscopy&#39;</span><span class="p">])</span>
    <span class="kn">import</span> <span class="nn">pycroscopy</span> <span class="kn">as</span> <span class="nn">px</span>
</pre></div>
</div>
<p>In order to demonstrate the many functions in hdf_utils, we will be using an pycroscopy HDF5 data file containing real
experimental data along with results from analyses on the measurement data</p>
</div>
<div class="section" id="this-scientific-dataset">
<h2>This scientific dataset<a class="headerlink" href="#this-scientific-dataset" title="Permalink to this headline">¶</a></h2>
<p>For this example, we will be working with a <strong>Band Excitation Polarization Switching (BEPS)</strong> dataset acquired from
advanced atomic force microscopes. In the much simpler <strong>Band Excitation (BE)</strong> imaging datasets, a single spectra is
acquired at each location in a two dimensional grid of spatial locations. Thus, BE imaging datasets have two
position dimensions (<code class="docutils literal notranslate"><span class="pre">X</span></code>, <code class="docutils literal notranslate"><span class="pre">Y</span></code>) and one spectroscopic dimension (<code class="docutils literal notranslate"><span class="pre">Frequency</span></code> - against which the spectra is recorded).
The BEPS dataset used in this example has a spectra for each combination of three other parameters (<code class="docutils literal notranslate"><span class="pre">DC</span> <span class="pre">offset</span></code>,
<code class="docutils literal notranslate"><span class="pre">Field</span></code>, and <code class="docutils literal notranslate"><span class="pre">Cycle</span></code>). Thus, this dataset has three new spectral dimensions in addition to the spectra itself. Hence,
this dataset becomes a 2+4 = <strong>6 dimensional dataset</strong></p>
</div>
<div class="section" id="load-the-dataset">
<h2>Load the dataset<a class="headerlink" href="#load-the-dataset" title="Permalink to this headline">¶</a></h2>
<p>First, let us download this file from the pycroscopy Github project:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">url</span> <span class="o">=</span> <span class="s1">&#39;https://raw.githubusercontent.com/pycroscopy/pycroscopy/master/data/BEPS_small.h5&#39;</span>
<span class="n">h5_path</span> <span class="o">=</span> <span class="s1">&#39;temp.h5&#39;</span>
<span class="n">_</span> <span class="o">=</span> <span class="n">wget</span><span class="o">.</span><span class="n">download</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">h5_path</span><span class="p">)</span>

<span class="k">print</span><span class="p">(</span><span class="s1">&#39;Working on:</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">+</span> <span class="n">h5_path</span><span class="p">)</span>
</pre></div>
</div>
<p class="sphx-glr-script-out">Out:</p>
<div class="sphx-glr-script-out highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Working</span> <span class="n">on</span><span class="p">:</span>
<span class="n">temp</span><span class="o">.</span><span class="n">h5</span>
</pre></div>
</div>
<p>Next, lets open this HDF5 file in read-only mode. Note that opening the file does not cause the contents to be
automatically loaded to memory. Instead, we are presented with objects that refer to specific HDF5 datasets,
attributes or groups in the file</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">h5_path</span> <span class="o">=</span> <span class="s1">&#39;temp.h5&#39;</span>
<span class="n">h5_f</span> <span class="o">=</span> <span class="n">h5py</span><span class="o">.</span><span class="n">File</span><span class="p">(</span><span class="n">h5_path</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s1">&#39;r&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Here, h5_f is an active handle to the open file</p>
<div class="section" id="inspect-hdf5-contents">
<h3>Inspect HDF5 contents<a class="headerlink" href="#inspect-hdf5-contents" title="Permalink to this headline">¶</a></h3>
<p>The file contents are stored in a tree structure, just like files on a contemporary computer. The file contains
groups (similar to file folders) and datasets (similar to spreadsheets).
There are several datasets in the file and these store:</p>
<ul class="simple">
<li>The actual measurement collected from the experiment</li>
<li>Spatial location on the sample where each measurement was collected</li>
<li>Information to support and explain the spectral data collected at each location</li>
<li>Since pycroscopy stores results from processing and analyses performed on the data in the same file, these
datasets and groups are present as well</li>
<li>Any other relevant ancillary information</li>
</ul>
</div>
</div>
<div class="section" id="print-tree">
<h2>print_tree()<a class="headerlink" href="#print-tree" title="Permalink to this headline">¶</a></h2>
<p>Soon after opening any file, it is often of interest to list the contents of the file. While one can use the open
source software HDFViewer developed by the HDF organization, <code class="docutils literal notranslate"><span class="pre">pycroscopy.hdf_utils</span></code> also has a very handy function -
<code class="docutils literal notranslate"><span class="pre">print_tree()</span></code> to quickly visualize all the datasets and groups within the file within python.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">print</span><span class="p">(</span><span class="s1">&#39;Contents of the H5 file:&#39;</span><span class="p">)</span>
<span class="n">px</span><span class="o">.</span><span class="n">hdf_utils</span><span class="o">.</span><span class="n">print_tree</span><span class="p">(</span><span class="n">h5_f</span><span class="p">)</span>
</pre></div>
</div>
<p class="sphx-glr-script-out">Out:</p>
<div class="sphx-glr-script-out highlight-default notranslate"><div class="highlight"><pre><span></span>Contents of the H5 file:
/
├ Measurement_000
  ---------------
  ├ Channel_000
    -----------
    ├ Bin_FFT
    ├ Bin_Frequencies
    ├ Bin_Indices
    ├ Bin_Step
    ├ Bin_Wfm_Type
    ├ Excitation_Waveform
    ├ Noise_Floor
    ├ Position_Indices
    ├ Position_Values
    ├ Raw_Data
    ├ Raw_Data-SHO_Fit_000
      --------------------
      ├ Fit
      ├ Guess
      ├ Spectroscopic_Indices
      ├ Spectroscopic_Values
    ├ Spatially_Averaged_Plot_Group_000
      ---------------------------------
      ├ Bin_Frequencies
      ├ Mean_Spectrogram
      ├ Spectroscopic_Parameter
      ├ Step_Averaged_Response
    ├ Spatially_Averaged_Plot_Group_001
      ---------------------------------
      ├ Bin_Frequencies
      ├ Mean_Spectrogram
      ├ Spectroscopic_Parameter
      ├ Step_Averaged_Response
    ├ Spectroscopic_Indices
    ├ Spectroscopic_Values
    ├ UDVS
    ├ UDVS_Indices
</pre></div>
</div>
<p>By default, <code class="docutils literal notranslate"><span class="pre">print_tree()</span></code> presents a clean tree view of the contents of the group. In this mode, only the group names
are underlined. Alternatively, it can print the full  paths of each dataset and group by setting the <code class="docutils literal notranslate"><span class="pre">full_paths</span></code>
keyword argument. <code class="docutils literal notranslate"><span class="pre">print_tree()</span></code> could also be used to display the contents of and HDF5 group instead of complete HDF5
file as we have done above. Lets configure it to print the relative paths of all objects within the <code class="docutils literal notranslate"><span class="pre">Channel_000</span></code>
group:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">px</span><span class="o">.</span><span class="n">hdf_utils</span><span class="o">.</span><span class="n">print_tree</span><span class="p">(</span><span class="n">h5_f</span><span class="p">[</span><span class="s1">&#39;/Measurement_000/Channel_000/&#39;</span><span class="p">],</span> <span class="n">rel_paths</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
</pre></div>
</div>
<p class="sphx-glr-script-out">Out:</p>
<div class="sphx-glr-script-out highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">/</span><span class="n">Measurement_000</span><span class="o">/</span><span class="n">Channel_000</span>
<span class="n">Bin_FFT</span>
<span class="n">Bin_Frequencies</span>
<span class="n">Bin_Indices</span>
<span class="n">Bin_Step</span>
<span class="n">Bin_Wfm_Type</span>
<span class="n">Excitation_Waveform</span>
<span class="n">Noise_Floor</span>
<span class="n">Position_Indices</span>
<span class="n">Position_Values</span>
<span class="n">Raw_Data</span>
<span class="n">Raw_Data</span><span class="o">-</span><span class="n">SHO_Fit_000</span>
<span class="n">Raw_Data</span><span class="o">-</span><span class="n">SHO_Fit_000</span><span class="o">/</span><span class="n">Fit</span>
<span class="n">Raw_Data</span><span class="o">-</span><span class="n">SHO_Fit_000</span><span class="o">/</span><span class="n">Guess</span>
<span class="n">Raw_Data</span><span class="o">-</span><span class="n">SHO_Fit_000</span><span class="o">/</span><span class="n">Spectroscopic_Indices</span>
<span class="n">Raw_Data</span><span class="o">-</span><span class="n">SHO_Fit_000</span><span class="o">/</span><span class="n">Spectroscopic_Values</span>
<span class="n">Spatially_Averaged_Plot_Group_000</span>
<span class="n">Spatially_Averaged_Plot_Group_000</span><span class="o">/</span><span class="n">Bin_Frequencies</span>
<span class="n">Spatially_Averaged_Plot_Group_000</span><span class="o">/</span><span class="n">Mean_Spectrogram</span>
<span class="n">Spatially_Averaged_Plot_Group_000</span><span class="o">/</span><span class="n">Spectroscopic_Parameter</span>
<span class="n">Spatially_Averaged_Plot_Group_000</span><span class="o">/</span><span class="n">Step_Averaged_Response</span>
<span class="n">Spatially_Averaged_Plot_Group_001</span>
<span class="n">Spatially_Averaged_Plot_Group_001</span><span class="o">/</span><span class="n">Bin_Frequencies</span>
<span class="n">Spatially_Averaged_Plot_Group_001</span><span class="o">/</span><span class="n">Mean_Spectrogram</span>
<span class="n">Spatially_Averaged_Plot_Group_001</span><span class="o">/</span><span class="n">Spectroscopic_Parameter</span>
<span class="n">Spatially_Averaged_Plot_Group_001</span><span class="o">/</span><span class="n">Step_Averaged_Response</span>
<span class="n">Spectroscopic_Indices</span>
<span class="n">Spectroscopic_Values</span>
<span class="n">UDVS</span>
<span class="n">UDVS_Indices</span>
</pre></div>
</div>
<p>Finally, <code class="docutils literal notranslate"><span class="pre">print_tree()</span></code> can also be configured to only print Pycroscopy Main datasets besides Group objects using the
<code class="docutils literal notranslate"><span class="pre">main_dsets_only</span></code> option</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">px</span><span class="o">.</span><span class="n">hdf_utils</span><span class="o">.</span><span class="n">print_tree</span><span class="p">(</span><span class="n">h5_f</span><span class="p">,</span> <span class="n">main_dsets_only</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
</pre></div>
</div>
<p class="sphx-glr-script-out">Out:</p>
<div class="sphx-glr-script-out highlight-default notranslate"><div class="highlight"><pre><span></span>/
├ Measurement_000
  ---------------
  ├ Channel_000
    -----------
    ├ Raw_Data
    ├ Raw_Data-SHO_Fit_000
      --------------------
      ├ Fit
      ├ Guess
    ├ Spatially_Averaged_Plot_Group_000
      ---------------------------------
    ├ Spatially_Averaged_Plot_Group_001
      ---------------------------------
</pre></div>
</div>
<div class="section" id="accessing-attributes">
<h3>Accessing Attributes<a class="headerlink" href="#accessing-attributes" title="Permalink to this headline">¶</a></h3>
<p>HDF5 datasets and datagroups can also store metadata such as experimental parameters. These metadata can be text,
numbers, small lists of numbers or text etc. These metadata can be very important for understanding the datasets
and guide the analysis routines.</p>
<p>While one could use the basic h5py functionality to access attributes, one would encounter a lot of problems when
attempting to decode attributes whose values were strings or lists of strings due to some issues in h5py. This problem
has been demonstrated in our primer to HDF5. Instead of using the basic functionality of h5py, we recommend always
using the functions in pycroscopy that reliably and consistently work for any kind of attribute for any version of
python:</p>
</div>
</div>
<div class="section" id="get-attributes">
<h2>get_attributes()<a class="headerlink" href="#get-attributes" title="Permalink to this headline">¶</a></h2>
<p><code class="docutils literal notranslate"><span class="pre">get_attributes()</span></code> is a very handy function that returns all or a specified set of attributes in an HDF5 object. If no
attributes are explicitly requested, all attributes in the object are returned:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">val</span> <span class="ow">in</span> <span class="n">px</span><span class="o">.</span><span class="n">hdf_utils</span><span class="o">.</span><span class="n">get_attributes</span><span class="p">(</span><span class="n">h5_f</span><span class="p">)</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
    <span class="k">print</span><span class="p">(</span><span class="s1">&#39;{} : {}&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">val</span><span class="p">))</span>
</pre></div>
</div>
<p class="sphx-glr-script-out">Out:</p>
<div class="sphx-glr-script-out highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">instrument</span> <span class="p">:</span> <span class="n">cypher_west</span>
<span class="n">user_name</span> <span class="p">:</span> <span class="n">John</span> <span class="n">Doe</span>
<span class="n">data_type</span> <span class="p">:</span> <span class="n">BEPSData</span>
<span class="n">current_position_x</span> <span class="p">:</span> <span class="mi">4</span>
<span class="n">translate_date</span> <span class="p">:</span> <span class="mi">2017</span><span class="n">_08_22</span>
<span class="n">current_position_y</span> <span class="p">:</span> <span class="mi">4</span>
<span class="n">project_name</span> <span class="p">:</span> <span class="n">Band</span> <span class="n">Excitation</span>
<span class="n">xcams_id</span> <span class="p">:</span> <span class="n">abc</span>
<span class="n">sample_name</span> <span class="p">:</span> <span class="n">PZT</span>
<span class="n">comments</span> <span class="p">:</span> <span class="n">Band</span> <span class="n">Excitation</span> <span class="n">data</span>
<span class="n">project_id</span> <span class="p">:</span> <span class="n">CNMS_2015B_X0000</span>
<span class="n">experiment_unix_time</span> <span class="p">:</span> <span class="mf">1503428472.2374</span>
<span class="n">experiment_date</span> <span class="p">:</span> <span class="mi">26</span><span class="o">-</span><span class="n">Feb</span><span class="o">-</span><span class="mi">2015</span> <span class="mi">14</span><span class="p">:</span><span class="mi">49</span><span class="p">:</span><span class="mi">48</span>
<span class="n">data_tool</span> <span class="p">:</span> <span class="n">be_analyzer</span>
<span class="n">grid_size_y</span> <span class="p">:</span> <span class="mi">5</span>
<span class="n">sample_description</span> <span class="p">:</span> <span class="n">Thin</span> <span class="n">Film</span>
<span class="n">translator</span> <span class="p">:</span> <span class="n">ODF</span>
<span class="n">grid_size_x</span> <span class="p">:</span> <span class="mi">5</span>
<span class="n">Pycroscopy</span> <span class="n">version</span> <span class="p">:</span> <span class="mf">0.0</span><span class="o">.</span><span class="n">a51</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">get_attributes()</span></code> is also great for only getting selected attributes. For example, if we only cared about the user
and project related attributes, we could manually request for any that we wanted:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">proj_attrs</span> <span class="o">=</span> <span class="n">px</span><span class="o">.</span><span class="n">hdf_utils</span><span class="o">.</span><span class="n">get_attributes</span><span class="p">(</span><span class="n">h5_f</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;project_name&#39;</span><span class="p">,</span> <span class="s1">&#39;project_id&#39;</span><span class="p">,</span> <span class="s1">&#39;user_name&#39;</span><span class="p">])</span>
<span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">val</span> <span class="ow">in</span> <span class="n">proj_attrs</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
    <span class="k">print</span><span class="p">(</span><span class="s1">&#39;{} : {}&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">val</span><span class="p">))</span>
</pre></div>
</div>
<p class="sphx-glr-script-out">Out:</p>
<div class="sphx-glr-script-out highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">project_name</span> <span class="p">:</span> <span class="n">Band</span> <span class="n">Excitation</span>
<span class="n">project_id</span> <span class="p">:</span> <span class="n">CNMS_2015B_X0000</span>
<span class="n">user_name</span> <span class="p">:</span> <span class="n">John</span> <span class="n">Doe</span>
</pre></div>
</div>
</div>
<div class="section" id="get-attr">
<h2>get_attr()<a class="headerlink" href="#get-attr" title="Permalink to this headline">¶</a></h2>
<p>If were sure that we only wanted a specific attribute, we could instead use <code class="docutils literal notranslate"><span class="pre">get_attr()</span></code> as:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">print</span><span class="p">(</span><span class="n">px</span><span class="o">.</span><span class="n">hdf_utils</span><span class="o">.</span><span class="n">get_attr</span><span class="p">(</span><span class="n">h5_f</span><span class="p">,</span> <span class="s1">&#39;user_name&#39;</span><span class="p">))</span>
</pre></div>
</div>
<p class="sphx-glr-script-out">Out:</p>
<div class="sphx-glr-script-out highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">John</span> <span class="n">Doe</span>
</pre></div>
</div>
</div>
<div class="section" id="check-for-matching-attrs">
<h2>check_for_matching_attrs()<a class="headerlink" href="#check-for-matching-attrs" title="Permalink to this headline">¶</a></h2>
<p>Consider the scenario where we are have several HDF5 files or Groups or datasets and we wanted to check each one to
see if they have the certain metadata / attributes. <code class="docutils literal notranslate"><span class="pre">check_for_matching_attrs()</span></code> is one very handy function that
simplifies the comparision operation.</p>
<p>For example, let us check if this file was authored by ‘John Doe’:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">print</span><span class="p">(</span><span class="n">px</span><span class="o">.</span><span class="n">hdf_utils</span><span class="o">.</span><span class="n">check_for_matching_attrs</span><span class="p">(</span><span class="n">h5_f</span><span class="p">,</span> <span class="n">new_parms</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;user_name&#39;</span><span class="p">:</span> <span class="s1">&#39;John Doe&#39;</span><span class="p">}))</span>
</pre></div>
</div>
<p class="sphx-glr-script-out">Out:</p>
<div class="sphx-glr-script-out highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kc">True</span>
</pre></div>
</div>
<div class="section" id="finding-datasets-and-groups">
<h3>Finding datasets and groups<a class="headerlink" href="#finding-datasets-and-groups" title="Permalink to this headline">¶</a></h3>
<p>There are numerous ways to search for and access datasets and groups in H5 files using the basic functionalities
of h5py. pycroscopy.hdf_utils contains several functions that simplify common searching / lookup operations as part of
scientific workflows.</p>
</div>
</div>
<div class="section" id="find-dataset">
<h2>find_dataset()<a class="headerlink" href="#find-dataset" title="Permalink to this headline">¶</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">find_dataset()</span></code> function will return all datasets that whose names contain the provided string. In this case, we
are looking for any datasets containing the string <code class="docutils literal notranslate"><span class="pre">UDVS</span></code> in their names. If you look above, there are two datasets
(UDVS and UDVS_Indices) that match this condition:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">udvs_dsets_2</span> <span class="o">=</span> <span class="n">px</span><span class="o">.</span><span class="n">hdf_utils</span><span class="o">.</span><span class="n">find_dataset</span><span class="p">(</span><span class="n">h5_f</span><span class="p">,</span> <span class="s1">&#39;UDVS&#39;</span><span class="p">)</span>
<span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">udvs_dsets_2</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>
</pre></div>
</div>
<p class="sphx-glr-script-out">Out:</p>
<div class="sphx-glr-script-out highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">HDF5</span> <span class="n">dataset</span> <span class="s2">&quot;UDVS&quot;</span><span class="p">:</span> <span class="n">shape</span> <span class="p">(</span><span class="mi">256</span><span class="p">,</span> <span class="mi">7</span><span class="p">),</span> <span class="nb">type</span> <span class="s2">&quot;&lt;f4&quot;</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="n">HDF5</span> <span class="n">dataset</span> <span class="s2">&quot;UDVS_Indices&quot;</span><span class="p">:</span> <span class="n">shape</span> <span class="p">(</span><span class="mi">22272</span><span class="p">,),</span> <span class="nb">type</span> <span class="s2">&quot;&lt;u8&quot;</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>As you might know by now, Pycroscopy HDF5 files contain three kinds of datasets:</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">Main</span></code> datasets that contain data recorded / computed at multiple spatial locations.</li>
<li><code class="docutils literal notranslate"><span class="pre">Ancillary</span></code> datasets that support a main dataset</li>
<li>Other datasets</li>
</ul>
<p>For more information, please refer to the documentation on the pycroscopy data format.</p>
</div>
<div class="section" id="check-if-main">
<h2>check_if_main()<a class="headerlink" href="#check-if-main" title="Permalink to this headline">¶</a></h2>
<p><code class="docutils literal notranslate"><span class="pre">check_if_main()</span></code> is a very handy function that helps distinguish between <code class="docutils literal notranslate"><span class="pre">Main</span></code> datasets and other objects
(<code class="docutils literal notranslate"><span class="pre">Ancillary</span></code> datasets, other datasets, Groups etc.). Lets apply this function to see which of the objects within the
<code class="docutils literal notranslate"><span class="pre">Channel_000</span></code> Group are Main datasets:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">h5_chan_group</span> <span class="o">=</span> <span class="n">h5_f</span><span class="p">[</span><span class="s1">&#39;Measurement_000/Channel_000&#39;</span><span class="p">]</span>

<span class="c1"># We will prepare two lists - one of objects that are main and one of objects that are not</span>

<span class="n">non_main_objs</span> <span class="o">=</span> <span class="p">[]</span>
<span class="n">main_objs</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">val</span> <span class="ow">in</span> <span class="n">h5_chan_group</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
    <span class="k">if</span> <span class="n">px</span><span class="o">.</span><span class="n">hdf_utils</span><span class="o">.</span><span class="n">check_if_main</span><span class="p">(</span><span class="n">val</span><span class="p">):</span>
        <span class="n">main_objs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">non_main_objs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>

<span class="c1"># Now we simply print the names of the items in each list</span>

<span class="k">print</span><span class="p">(</span><span class="s1">&#39;Main Datasets:&#39;</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s1">&#39;----------------&#39;</span><span class="p">)</span>
<span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">main_objs</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">Objects that were not Main datasets:&#39;</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s1">&#39;--------------------------------------&#39;</span><span class="p">)</span>
<span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">non_main_objs</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>
</pre></div>
</div>
<p class="sphx-glr-script-out">Out:</p>
<div class="sphx-glr-script-out highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Main</span> <span class="n">Datasets</span><span class="p">:</span>
<span class="o">----------------</span>
<span class="n">Raw_Data</span>

<span class="n">Objects</span> <span class="n">that</span> <span class="n">were</span> <span class="ow">not</span> <span class="n">Main</span> <span class="n">datasets</span><span class="p">:</span>
<span class="o">--------------------------------------</span>
<span class="n">Bin_FFT</span>
<span class="n">Bin_Frequencies</span>
<span class="n">Bin_Indices</span>
<span class="n">Bin_Step</span>
<span class="n">Bin_Wfm_Type</span>
<span class="n">Excitation_Waveform</span>
<span class="n">Noise_Floor</span>
<span class="n">Position_Indices</span>
<span class="n">Position_Values</span>
<span class="n">Raw_Data</span><span class="o">-</span><span class="n">SHO_Fit_000</span>
<span class="n">Spatially_Averaged_Plot_Group_000</span>
<span class="n">Spatially_Averaged_Plot_Group_001</span>
<span class="n">Spectroscopic_Indices</span>
<span class="n">Spectroscopic_Values</span>
<span class="n">UDVS</span>
<span class="n">UDVS_Indices</span>
</pre></div>
</div>
<p>The above script allowed us to distinguish Main datasets from all other objects only within the Group named
<code class="docutils literal notranslate"><span class="pre">Channel_000</span></code>.</p>
</div>
<div class="section" id="get-all-main">
<h2>get_all_main()<a class="headerlink" href="#get-all-main" title="Permalink to this headline">¶</a></h2>
<p>What if we want to quickly find all <code class="docutils literal notranslate"><span class="pre">Main</span></code> datasets even within the sub-Groups of <code class="docutils literal notranslate"><span class="pre">Channel_000</span></code>? To do this, we have a
very handy function called - <code class="docutils literal notranslate"><span class="pre">get_all_main()</span></code>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">main_dsets</span> <span class="o">=</span> <span class="n">px</span><span class="o">.</span><span class="n">hdf_utils</span><span class="o">.</span><span class="n">get_all_main</span><span class="p">(</span><span class="n">h5_chan_group</span><span class="p">)</span>
<span class="k">for</span> <span class="n">dset</span> <span class="ow">in</span> <span class="n">main_dsets</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="n">dset</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="s1">&#39;--------------------------------------------------------------------&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p class="sphx-glr-script-out">Out:</p>
<div class="sphx-glr-script-out highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">HDF5</span> <span class="n">dataset</span> <span class="s2">&quot;Raw_Data&quot;</span><span class="p">:</span> <span class="n">shape</span> <span class="p">(</span><span class="mi">25</span><span class="p">,</span> <span class="mi">22272</span><span class="p">),</span> <span class="nb">type</span> <span class="s2">&quot;&lt;c8&quot;</span><span class="o">&gt;</span>
<span class="n">located</span> <span class="n">at</span><span class="p">:</span>
        <span class="o">/</span><span class="n">Measurement_000</span><span class="o">/</span><span class="n">Channel_000</span><span class="o">/</span><span class="n">Raw_Data</span>
<span class="n">Data</span> <span class="n">contains</span><span class="p">:</span>
        <span class="n">Cantilever</span> <span class="n">Vertical</span> <span class="n">Deflection</span> <span class="p">(</span><span class="n">V</span><span class="p">)</span>
<span class="n">Data</span> <span class="n">dimensions</span> <span class="ow">and</span> <span class="n">original</span> <span class="n">shape</span><span class="p">:</span>
<span class="n">Position</span> <span class="n">Dimensions</span><span class="p">:</span>
        <span class="n">X</span> <span class="o">-</span> <span class="n">size</span><span class="p">:</span> <span class="mi">5</span>
        <span class="n">Y</span> <span class="o">-</span> <span class="n">size</span><span class="p">:</span> <span class="mi">5</span>
<span class="n">Spectroscopic</span> <span class="n">Dimensions</span><span class="p">:</span>
        <span class="n">Frequency</span> <span class="o">-</span> <span class="n">size</span><span class="p">:</span> <span class="mi">87</span>
        <span class="n">DC_Offset</span> <span class="o">-</span> <span class="n">size</span><span class="p">:</span> <span class="mi">64</span>
        <span class="n">Field</span> <span class="o">-</span> <span class="n">size</span><span class="p">:</span> <span class="mi">2</span>
        <span class="n">Cycle</span> <span class="o">-</span> <span class="n">size</span><span class="p">:</span> <span class="mi">2</span>
<span class="n">Data</span> <span class="n">Type</span><span class="p">:</span>
        <span class="n">complex64</span>
<span class="o">--------------------------------------------------------------------</span>
<span class="o">&lt;</span><span class="n">HDF5</span> <span class="n">dataset</span> <span class="s2">&quot;Fit&quot;</span><span class="p">:</span> <span class="n">shape</span> <span class="p">(</span><span class="mi">25</span><span class="p">,</span> <span class="mi">256</span><span class="p">),</span> <span class="nb">type</span> <span class="s2">&quot;|V20&quot;</span><span class="o">&gt;</span>
<span class="n">located</span> <span class="n">at</span><span class="p">:</span>
        <span class="o">/</span><span class="n">Measurement_000</span><span class="o">/</span><span class="n">Channel_000</span><span class="o">/</span><span class="n">Raw_Data</span><span class="o">-</span><span class="n">SHO_Fit_000</span><span class="o">/</span><span class="n">Fit</span>
<span class="n">Data</span> <span class="n">contains</span><span class="p">:</span>
        <span class="n">SHO</span> <span class="n">parameters</span> <span class="p">(</span><span class="n">compound</span><span class="p">)</span>
<span class="n">Data</span> <span class="n">dimensions</span> <span class="ow">and</span> <span class="n">original</span> <span class="n">shape</span><span class="p">:</span>
<span class="n">Position</span> <span class="n">Dimensions</span><span class="p">:</span>
        <span class="n">X</span> <span class="o">-</span> <span class="n">size</span><span class="p">:</span> <span class="mi">5</span>
        <span class="n">Y</span> <span class="o">-</span> <span class="n">size</span><span class="p">:</span> <span class="mi">5</span>
<span class="n">Spectroscopic</span> <span class="n">Dimensions</span><span class="p">:</span>
        <span class="n">DC_Offset</span> <span class="o">-</span> <span class="n">size</span><span class="p">:</span> <span class="mi">64</span>
        <span class="n">Field</span> <span class="o">-</span> <span class="n">size</span><span class="p">:</span> <span class="mi">2</span>
        <span class="n">Cycle</span> <span class="o">-</span> <span class="n">size</span><span class="p">:</span> <span class="mi">2</span>
<span class="n">Data</span> <span class="n">Fields</span><span class="p">:</span>
        <span class="n">Amplitude</span> <span class="p">[</span><span class="n">V</span><span class="p">],</span> <span class="n">Frequency</span> <span class="p">[</span><span class="n">Hz</span><span class="p">],</span> <span class="n">Quality</span> <span class="n">Factor</span><span class="p">,</span> <span class="n">Phase</span> <span class="p">[</span><span class="n">rad</span><span class="p">],</span> <span class="n">R2</span> <span class="n">Criterion</span>
<span class="o">--------------------------------------------------------------------</span>
<span class="o">&lt;</span><span class="n">HDF5</span> <span class="n">dataset</span> <span class="s2">&quot;Guess&quot;</span><span class="p">:</span> <span class="n">shape</span> <span class="p">(</span><span class="mi">25</span><span class="p">,</span> <span class="mi">256</span><span class="p">),</span> <span class="nb">type</span> <span class="s2">&quot;|V20&quot;</span><span class="o">&gt;</span>
<span class="n">located</span> <span class="n">at</span><span class="p">:</span>
        <span class="o">/</span><span class="n">Measurement_000</span><span class="o">/</span><span class="n">Channel_000</span><span class="o">/</span><span class="n">Raw_Data</span><span class="o">-</span><span class="n">SHO_Fit_000</span><span class="o">/</span><span class="n">Guess</span>
<span class="n">Data</span> <span class="n">contains</span><span class="p">:</span>
        <span class="n">SHO</span> <span class="n">parameters</span> <span class="p">(</span><span class="n">compound</span><span class="p">)</span>
<span class="n">Data</span> <span class="n">dimensions</span> <span class="ow">and</span> <span class="n">original</span> <span class="n">shape</span><span class="p">:</span>
<span class="n">Position</span> <span class="n">Dimensions</span><span class="p">:</span>
        <span class="n">X</span> <span class="o">-</span> <span class="n">size</span><span class="p">:</span> <span class="mi">5</span>
        <span class="n">Y</span> <span class="o">-</span> <span class="n">size</span><span class="p">:</span> <span class="mi">5</span>
<span class="n">Spectroscopic</span> <span class="n">Dimensions</span><span class="p">:</span>
        <span class="n">DC_Offset</span> <span class="o">-</span> <span class="n">size</span><span class="p">:</span> <span class="mi">64</span>
        <span class="n">Field</span> <span class="o">-</span> <span class="n">size</span><span class="p">:</span> <span class="mi">2</span>
        <span class="n">Cycle</span> <span class="o">-</span> <span class="n">size</span><span class="p">:</span> <span class="mi">2</span>
<span class="n">Data</span> <span class="n">Fields</span><span class="p">:</span>
        <span class="n">Amplitude</span> <span class="p">[</span><span class="n">V</span><span class="p">],</span> <span class="n">Frequency</span> <span class="p">[</span><span class="n">Hz</span><span class="p">],</span> <span class="n">Quality</span> <span class="n">Factor</span><span class="p">,</span> <span class="n">Phase</span> <span class="p">[</span><span class="n">rad</span><span class="p">],</span> <span class="n">R2</span> <span class="n">Criterion</span>
<span class="o">--------------------------------------------------------------------</span>
</pre></div>
</div>
<p>The datasets above show that the file contains three main datasets. Two of these datasets are contained in a HDF5
Group called <code class="docutils literal notranslate"><span class="pre">Raw_Data-SHO_Fit_000</span></code> meaning that they are results of an operation called <code class="docutils literal notranslate"><span class="pre">SHO_Fit</span></code> performed on the
<code class="docutils literal notranslate"><span class="pre">Main</span></code> dataset - <code class="docutils literal notranslate"><span class="pre">Raw_Data</span></code>. The first of the three main datasets is indeed the <code class="docutils literal notranslate"><span class="pre">Raw_Data</span></code> dataset from which the
latter two datasets (<code class="docutils literal notranslate"><span class="pre">Fit</span></code> and <code class="docutils literal notranslate"><span class="pre">Guess</span></code>) were derived.</p>
<p>Pycroscopy allows the same operation, such as <code class="docutils literal notranslate"><span class="pre">SHO_Fit</span></code>, to be performed on the same dataset (<code class="docutils literal notranslate"><span class="pre">Raw_Data</span></code>), multiple
times. Each time the operation is performed, a new HDF5 Group is created to hold the new results. Often, we may
want to perform a few operations such as:</p>
<ul class="simple">
<li>Find the (source / main) dataset from which certain results were derived</li>
<li>Check if a particular operation was performed on a main dataset</li>
<li>Find all groups corresponding to a particular operation (e.g. - <code class="docutils literal notranslate"><span class="pre">SHO_Fit</span></code>) being applied to a Main dataset</li>
</ul>
<p><code class="docutils literal notranslate"><span class="pre">hdf_utils</span></code> has a few handy functions for many of these use cases.</p>
</div>
<div class="section" id="find-results-groups">
<h2>find_results_groups()<a class="headerlink" href="#find-results-groups" title="Permalink to this headline">¶</a></h2>
<p>First, lets show that <code class="docutils literal notranslate"><span class="pre">find_results_groups()</span></code> finds all Groups containing the results of a <code class="docutils literal notranslate"><span class="pre">SHO_Fit</span></code> operation applied
to <code class="docutils literal notranslate"><span class="pre">Raw_Data</span></code>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># First get the dataset corresponding to Raw_Data</span>
<span class="n">h5_raw</span> <span class="o">=</span> <span class="n">h5_chan_group</span><span class="p">[</span><span class="s1">&#39;Raw_Data&#39;</span><span class="p">]</span>

<span class="n">operation</span> <span class="o">=</span> <span class="s1">&#39;SHO_Fit&#39;</span>
<span class="k">print</span><span class="p">(</span><span class="s1">&#39;Instances of operation &quot;{}&quot; applied to dataset named &quot;{}&quot;:&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">operation</span><span class="p">,</span> <span class="n">h5_raw</span><span class="o">.</span><span class="n">name</span><span class="p">))</span>
<span class="n">h5_sho_group_list</span> <span class="o">=</span> <span class="n">px</span><span class="o">.</span><span class="n">hdf_utils</span><span class="o">.</span><span class="n">find_results_groups</span><span class="p">(</span><span class="n">h5_raw</span><span class="p">,</span> <span class="n">operation</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">h5_sho_group_list</span><span class="p">)</span>
</pre></div>
</div>
<p class="sphx-glr-script-out">Out:</p>
<div class="sphx-glr-script-out highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Instances</span> <span class="n">of</span> <span class="n">operation</span> <span class="s2">&quot;SHO_Fit&quot;</span> <span class="n">applied</span> <span class="n">to</span> <span class="n">dataset</span> <span class="n">named</span> <span class="s2">&quot;/Measurement_000/Channel_000/Raw_Data&quot;</span><span class="p">:</span>
<span class="p">[</span><span class="o">&lt;</span><span class="n">HDF5</span> <span class="n">group</span> <span class="s2">&quot;/Measurement_000/Channel_000/Raw_Data-SHO_Fit_000&quot;</span> <span class="p">(</span><span class="mi">4</span> <span class="n">members</span><span class="p">)</span><span class="o">&gt;</span><span class="p">]</span>
</pre></div>
</div>
<p>As expected, the <code class="docutils literal notranslate"><span class="pre">SHO_Fit</span></code> operation was performed on <code class="docutils literal notranslate"><span class="pre">Raw_Data</span></code> dataset only once, which is why
<code class="docutils literal notranslate"><span class="pre">find_results_groups()</span></code> returned only one HDF5 Group - <code class="docutils literal notranslate"><span class="pre">SHO_Fit_000</span></code>.</p>
</div>
<div class="section" id="check-for-old">
<h2>check_for_old()<a class="headerlink" href="#check-for-old" title="Permalink to this headline">¶</a></h2>
<p>Often one may want to check if a certain operation was performed on a dataset with the very same parameters to
avoid recomputing the results. <code class="docutils literal notranslate"><span class="pre">hdf_utils.check_for_old()</span></code> is a very handy function that compares parameters (a
dictionary) for a new / potential operation against the metadata (attributes) stored in each existing results group
(HDF5 groups whose name starts with <code class="docutils literal notranslate"><span class="pre">Raw_Data-SHO_Fit</span></code> in this case). Before we demonstrate <code class="docutils literal notranslate"><span class="pre">check_for_old()</span></code>, lets
take a look at the attributes stored in the existing results groups:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">print</span><span class="p">(</span><span class="s1">&#39;Parameters already used for computing SHO_Fit on Raw_Data in the file:&#39;</span><span class="p">)</span>
<span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">val</span> <span class="ow">in</span> <span class="n">px</span><span class="o">.</span><span class="n">hdf_utils</span><span class="o">.</span><span class="n">get_attributes</span><span class="p">(</span><span class="n">h5_chan_group</span><span class="p">[</span><span class="s1">&#39;Raw_Data-SHO_Fit_000&#39;</span><span class="p">])</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
    <span class="k">print</span><span class="p">(</span><span class="s1">&#39;{} : {}&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">val</span><span class="p">))</span>
</pre></div>
</div>
<p class="sphx-glr-script-out">Out:</p>
<div class="sphx-glr-script-out highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Parameters</span> <span class="n">already</span> <span class="n">used</span> <span class="k">for</span> <span class="n">computing</span> <span class="n">SHO_Fit</span> <span class="n">on</span> <span class="n">Raw_Data</span> <span class="ow">in</span> <span class="n">the</span> <span class="n">file</span><span class="p">:</span>
<span class="n">SHO_guess_method</span> <span class="p">:</span> <span class="n">pycroscopy</span> <span class="n">BESHO</span>
<span class="n">timestamp</span> <span class="p">:</span> <span class="mi">2017</span><span class="n">_08_22</span><span class="o">-</span><span class="mi">15</span><span class="n">_02_08</span>
<span class="n">machine_id</span> <span class="p">:</span> <span class="n">mac109728</span><span class="o">.</span><span class="n">ornl</span><span class="o">.</span><span class="n">gov</span>
<span class="n">SHO_fit_method</span> <span class="p">:</span> <span class="n">pycroscopy</span> <span class="n">BESHO</span>
</pre></div>
</div>
<p>Now, let us check for existing results where the <code class="docutils literal notranslate"><span class="pre">SHO_fit_method</span></code> attribute matches an existing value and a new value:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">print</span><span class="p">(</span><span class="s1">&#39;Checking to see if SHO Fits have been computed on the raw dataset:&#39;</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">Using &quot;pycroscopy BESHO&quot;:&#39;</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">px</span><span class="o">.</span><span class="n">hdf_utils</span><span class="o">.</span><span class="n">check_for_old</span><span class="p">(</span><span class="n">h5_raw</span><span class="p">,</span> <span class="s1">&#39;SHO_Fit&#39;</span><span class="p">,</span>
                                 <span class="n">new_parms</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;SHO_fit_method&#39;</span><span class="p">:</span> <span class="s1">&#39;pycroscopy BESHO&#39;</span><span class="p">}))</span>
<span class="k">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">Using &quot;alternate technique&quot;&#39;</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">px</span><span class="o">.</span><span class="n">hdf_utils</span><span class="o">.</span><span class="n">check_for_old</span><span class="p">(</span><span class="n">h5_raw</span><span class="p">,</span> <span class="s1">&#39;SHO_Fit&#39;</span><span class="p">,</span>
                                 <span class="n">new_parms</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;SHO_fit_method&#39;</span><span class="p">:</span> <span class="s1">&#39;alternate technique&#39;</span><span class="p">}))</span>
</pre></div>
</div>
<p class="sphx-glr-script-out">Out:</p>
<div class="sphx-glr-script-out highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Checking</span> <span class="n">to</span> <span class="n">see</span> <span class="k">if</span> <span class="n">SHO</span> <span class="n">Fits</span> <span class="n">have</span> <span class="n">been</span> <span class="n">computed</span> <span class="n">on</span> <span class="n">the</span> <span class="n">raw</span> <span class="n">dataset</span><span class="p">:</span>

<span class="n">Using</span> <span class="s2">&quot;pycroscopy BESHO&quot;</span><span class="p">:</span>
<span class="p">[</span><span class="o">&lt;</span><span class="n">HDF5</span> <span class="n">group</span> <span class="s2">&quot;/Measurement_000/Channel_000/Raw_Data-SHO_Fit_000&quot;</span> <span class="p">(</span><span class="mi">4</span> <span class="n">members</span><span class="p">)</span><span class="o">&gt;</span><span class="p">]</span>

<span class="n">Using</span> <span class="s2">&quot;alternate technique&quot;</span>
<span class="p">[]</span>
</pre></div>
</div>
<p>Clearly, while find_results_groups() returned any and all groups corresponding to <code class="docutils literal notranslate"><span class="pre">SHO_Fit</span></code> being applied to
<code class="docutils literal notranslate"><span class="pre">Raw_Data</span></code>, <code class="docutils literal notranslate"><span class="pre">check_for_old()</span></code> only returned the group(s) where the operation was performed using the same specified
parameters (<code class="docutils literal notranslate"><span class="pre">sho_fit_method</span></code> in this case).</p>
<p>Note that <code class="docutils literal notranslate"><span class="pre">check_for_old()</span></code> performs two operations - search for all groups with the matching nomenclature and then
compare the attributes. <code class="docutils literal notranslate"><span class="pre">check_for_matching_attrs()</span></code> is the handy function, that enables the latter operation of
comparing a giving dictionary of parameters against attributes in a given object.</p>
</div>
<div class="section" id="get-source-dataset">
<h2>get_source_dataset()<a class="headerlink" href="#get-source-dataset" title="Permalink to this headline">¶</a></h2>
<p><code class="docutils literal notranslate"><span class="pre">hdf_utils.get_source_dataset()</span></code> is a very handy function for the inverse scenario where we are interested in finding
the source dataset from which the known result was derived:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">h5_sho_group</span> <span class="o">=</span> <span class="n">h5_sho_group_list</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="k">print</span><span class="p">(</span><span class="s1">&#39;Datagroup containing the SHO fits:&#39;</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">h5_sho_group</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">Dataset on which the SHO Fit was computed:&#39;</span><span class="p">)</span>
<span class="n">h5_source_dset</span> <span class="o">=</span> <span class="n">px</span><span class="o">.</span><span class="n">hdf_utils</span><span class="o">.</span><span class="n">get_source_dataset</span><span class="p">(</span><span class="n">h5_sho_group</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">h5_source_dset</span><span class="p">)</span>
</pre></div>
</div>
<p class="sphx-glr-script-out">Out:</p>
<div class="sphx-glr-script-out highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Datagroup</span> <span class="n">containing</span> <span class="n">the</span> <span class="n">SHO</span> <span class="n">fits</span><span class="p">:</span>
<span class="o">&lt;</span><span class="n">HDF5</span> <span class="n">group</span> <span class="s2">&quot;/Measurement_000/Channel_000/Raw_Data-SHO_Fit_000&quot;</span> <span class="p">(</span><span class="mi">4</span> <span class="n">members</span><span class="p">)</span><span class="o">&gt;</span>

<span class="n">Dataset</span> <span class="n">on</span> <span class="n">which</span> <span class="n">the</span> <span class="n">SHO</span> <span class="n">Fit</span> <span class="n">was</span> <span class="n">computed</span><span class="p">:</span>
<span class="o">&lt;</span><span class="n">HDF5</span> <span class="n">dataset</span> <span class="s2">&quot;Raw_Data&quot;</span><span class="p">:</span> <span class="n">shape</span> <span class="p">(</span><span class="mi">25</span><span class="p">,</span> <span class="mi">22272</span><span class="p">),</span> <span class="nb">type</span> <span class="s2">&quot;&lt;c8&quot;</span><span class="o">&gt;</span>
<span class="n">located</span> <span class="n">at</span><span class="p">:</span>
        <span class="o">/</span><span class="n">Measurement_000</span><span class="o">/</span><span class="n">Channel_000</span><span class="o">/</span><span class="n">Raw_Data</span>
<span class="n">Data</span> <span class="n">contains</span><span class="p">:</span>
        <span class="n">Cantilever</span> <span class="n">Vertical</span> <span class="n">Deflection</span> <span class="p">(</span><span class="n">V</span><span class="p">)</span>
<span class="n">Data</span> <span class="n">dimensions</span> <span class="ow">and</span> <span class="n">original</span> <span class="n">shape</span><span class="p">:</span>
<span class="n">Position</span> <span class="n">Dimensions</span><span class="p">:</span>
        <span class="n">X</span> <span class="o">-</span> <span class="n">size</span><span class="p">:</span> <span class="mi">5</span>
        <span class="n">Y</span> <span class="o">-</span> <span class="n">size</span><span class="p">:</span> <span class="mi">5</span>
<span class="n">Spectroscopic</span> <span class="n">Dimensions</span><span class="p">:</span>
        <span class="n">Frequency</span> <span class="o">-</span> <span class="n">size</span><span class="p">:</span> <span class="mi">87</span>
        <span class="n">DC_Offset</span> <span class="o">-</span> <span class="n">size</span><span class="p">:</span> <span class="mi">64</span>
        <span class="n">Field</span> <span class="o">-</span> <span class="n">size</span><span class="p">:</span> <span class="mi">2</span>
        <span class="n">Cycle</span> <span class="o">-</span> <span class="n">size</span><span class="p">:</span> <span class="mi">2</span>
<span class="n">Data</span> <span class="n">Type</span><span class="p">:</span>
        <span class="n">complex64</span>
</pre></div>
</div>
<p>Since the source dataset is always a <code class="docutils literal notranslate"><span class="pre">Main</span></code> dataset, <code class="docutils literal notranslate"><span class="pre">get_source_dataset()</span></code> results a <code class="docutils literal notranslate"><span class="pre">PycroDataset</span></code> object instead of
a regular <code class="docutils literal notranslate"><span class="pre">HDF5</span> <span class="pre">Dataset</span></code> object.</p>
<p>Note that <code class="docutils literal notranslate"><span class="pre">hdf_utils.get_source_dataset()</span></code> and <code class="docutils literal notranslate"><span class="pre">find_results_groups()</span></code> rely on the Pycroscopy rule that results of an
operation be stored in a Group named <code class="docutils literal notranslate"><span class="pre">Source_Dataset_Name-Operation_Name_00x</span></code>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># get_auxiliary_datasets()</span>
<span class="c1"># -------------------------</span>
<span class="c1"># The association of datasets and groups with one another provides a powerful mechanism for conveying (richer)</span>
<span class="c1"># information. One way to associate objects with each other is to store the reference of an object as an attribute of</span>
<span class="c1"># another. This is precisely the capability that is leveraged to turn Central datasets into Pycroscopy Main Datasets or</span>
<span class="c1"># ``PycroDatasets``. PycroDatasets need to have four attributes that are references to the ``Position`` and ``Spectroscopic``</span>
<span class="c1"># ``ancillary`` datasets. Note, that pycroscopy does not restrict or preclude the storage of other relevant datasets as</span>
<span class="c1"># attributes of another dataset.</span>
<span class="c1">#</span>
<span class="c1"># For example, the ``Raw_Data`` dataset appears to contain several attributes whose keys / names match the names of</span>
<span class="c1"># datasets we see above and values all appear to be HDF5 object references:</span>

<span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">val</span> <span class="ow">in</span> <span class="n">px</span><span class="o">.</span><span class="n">hdf_utils</span><span class="o">.</span><span class="n">get_attributes</span><span class="p">(</span><span class="n">h5_raw</span><span class="p">)</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
    <span class="k">print</span><span class="p">(</span><span class="s1">&#39;{} : {}&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">val</span><span class="p">))</span>
</pre></div>
</div>
<p class="sphx-glr-script-out">Out:</p>
<div class="sphx-glr-script-out highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Excitation_Waveform</span> <span class="p">:</span> <span class="o">&lt;</span><span class="n">HDF5</span> <span class="nb">object</span> <span class="n">reference</span><span class="o">&gt;</span>
<span class="n">Position_Indices</span> <span class="p">:</span> <span class="o">&lt;</span><span class="n">HDF5</span> <span class="nb">object</span> <span class="n">reference</span><span class="o">&gt;</span>
<span class="n">Position_Values</span> <span class="p">:</span> <span class="o">&lt;</span><span class="n">HDF5</span> <span class="nb">object</span> <span class="n">reference</span><span class="o">&gt;</span>
<span class="n">Spectroscopic_Indices</span> <span class="p">:</span> <span class="o">&lt;</span><span class="n">HDF5</span> <span class="nb">object</span> <span class="n">reference</span><span class="o">&gt;</span>
<span class="n">UDVS</span> <span class="p">:</span> <span class="o">&lt;</span><span class="n">HDF5</span> <span class="nb">object</span> <span class="n">reference</span><span class="o">&gt;</span>
<span class="n">Bin_Step</span> <span class="p">:</span> <span class="o">&lt;</span><span class="n">HDF5</span> <span class="nb">object</span> <span class="n">reference</span><span class="o">&gt;</span>
<span class="n">Bin_Indices</span> <span class="p">:</span> <span class="o">&lt;</span><span class="n">HDF5</span> <span class="nb">object</span> <span class="n">reference</span><span class="o">&gt;</span>
<span class="n">UDVS_Indices</span> <span class="p">:</span> <span class="o">&lt;</span><span class="n">HDF5</span> <span class="nb">object</span> <span class="n">reference</span><span class="o">&gt;</span>
<span class="n">Bin_Frequencies</span> <span class="p">:</span> <span class="o">&lt;</span><span class="n">HDF5</span> <span class="nb">object</span> <span class="n">reference</span><span class="o">&gt;</span>
<span class="n">Bin_FFT</span> <span class="p">:</span> <span class="o">&lt;</span><span class="n">HDF5</span> <span class="nb">object</span> <span class="n">reference</span><span class="o">&gt;</span>
<span class="n">Bin_Wfm_Type</span> <span class="p">:</span> <span class="o">&lt;</span><span class="n">HDF5</span> <span class="nb">object</span> <span class="n">reference</span><span class="o">&gt;</span>
<span class="n">in_field_Plot_Group</span> <span class="p">:</span> <span class="o">&lt;</span><span class="n">HDF5</span> <span class="n">region</span> <span class="n">reference</span><span class="o">&gt;</span>
<span class="n">out_of_field_Plot_Group</span> <span class="p">:</span> <span class="o">&lt;</span><span class="n">HDF5</span> <span class="n">region</span> <span class="n">reference</span><span class="o">&gt;</span>
<span class="n">Noise_Floor</span> <span class="p">:</span> <span class="o">&lt;</span><span class="n">HDF5</span> <span class="nb">object</span> <span class="n">reference</span><span class="o">&gt;</span>
<span class="n">Spectroscopic_Values</span> <span class="p">:</span> <span class="o">&lt;</span><span class="n">HDF5</span> <span class="nb">object</span> <span class="n">reference</span><span class="o">&gt;</span>
<span class="n">quantity</span> <span class="p">:</span> <span class="n">Cantilever</span> <span class="n">Vertical</span> <span class="n">Deflection</span>
<span class="n">units</span> <span class="p">:</span> <span class="n">V</span>
</pre></div>
</div>
<p>As the name suggests, these HDF5 object references are references or addresses to datasets located elsewhere in the
file. Conventionally, one would need to apply this reference to the file handle to get the actual HDF5 Dataset / Group
object.</p>
<p><code class="docutils literal notranslate"><span class="pre">get_auxiliary_datasets()</span></code> simplifies this process by directly retrieving the actual Dataset / Group associated with
the attribute. Thus, we would be able to get a reference to the <code class="docutils literal notranslate"><span class="pre">Bin_Frequencies</span></code> Dataset via:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">h5_obj</span> <span class="o">=</span> <span class="n">px</span><span class="o">.</span><span class="n">hdf_utils</span><span class="o">.</span><span class="n">get_auxiliary_datasets</span><span class="p">(</span><span class="n">h5_raw</span><span class="p">,</span> <span class="s1">&#39;Bin_Frequencies&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
<span class="k">print</span><span class="p">(</span><span class="n">h5_obj</span><span class="p">)</span>
<span class="c1"># Lets prove that this object is the same as the &#39;Bin_Frequencies&#39; object that can be directly addressed:</span>
<span class="k">print</span><span class="p">(</span><span class="n">h5_obj</span> <span class="o">==</span> <span class="n">h5_f</span><span class="p">[</span><span class="s1">&#39;/Measurement_000/Channel_000/Bin_Frequencies&#39;</span><span class="p">])</span>
</pre></div>
</div>
<p class="sphx-glr-script-out">Out:</p>
<div class="sphx-glr-script-out highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">HDF5</span> <span class="n">dataset</span> <span class="s2">&quot;Bin_Frequencies&quot;</span><span class="p">:</span> <span class="n">shape</span> <span class="p">(</span><span class="mi">87</span><span class="p">,),</span> <span class="nb">type</span> <span class="s2">&quot;&lt;f4&quot;</span><span class="o">&gt;</span>
<span class="kc">True</span>
</pre></div>
</div>
<div class="section" id="accessing-ancillary-datasets">
<h3>Accessing Ancillary Datasets<a class="headerlink" href="#accessing-ancillary-datasets" title="Permalink to this headline">¶</a></h3>
<p>One of the major benefits of Pycroscopy is its ability to handle large multidimensional datasets at ease. <code class="docutils literal notranslate"><span class="pre">Ancillary</span></code>
datasets serve as the keys or legends for explaining the dimensionality, reshape-ability, etc. of a dataset. There are
several functions in hdf_utils that simplify many common operations on ancillary datasets.</p>
<p>Before we demonstrate the several useful functions in hdf_utils, lets access the position and spectroscopic ancillary
datasets using the <code class="docutils literal notranslate"><span class="pre">get_auxiliary_datasets()</span></code> function we used above:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">dset_list</span> <span class="o">=</span> <span class="n">px</span><span class="o">.</span><span class="n">hdf_utils</span><span class="o">.</span><span class="n">get_auxiliary_datasets</span><span class="p">(</span><span class="n">h5_raw</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;Position_Indices&#39;</span><span class="p">,</span> <span class="s1">&#39;Position_Values&#39;</span><span class="p">,</span>
                                                         <span class="s1">&#39;Spectroscopic_Indices&#39;</span><span class="p">,</span> <span class="s1">&#39;Spectroscopic_Values&#39;</span><span class="p">])</span>
<span class="n">h5_pos_inds</span><span class="p">,</span> <span class="n">h5_pos_vals</span><span class="p">,</span> <span class="n">h5_spec_inds</span><span class="p">,</span> <span class="n">h5_spec_vals</span> <span class="o">=</span> <span class="n">dset_list</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="get-formatted-labels">
<h2>get_formatted_labels()<a class="headerlink" href="#get-formatted-labels" title="Permalink to this headline">¶</a></h2>
<p><code class="docutils literal notranslate"><span class="pre">get_formatted_labels()</span></code> provides a string representation of the dimensions represented by an ancillary dataset. Lets
try it out on the <code class="docutils literal notranslate"><span class="pre">Position</span> <span class="pre">Indices</span></code> and <code class="docutils literal notranslate"><span class="pre">Spectroscopic</span> <span class="pre">Indices</span></code> datasets:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">pos_dim_names</span> <span class="o">=</span> <span class="n">px</span><span class="o">.</span><span class="n">hdf_utils</span><span class="o">.</span><span class="n">get_formatted_labels</span><span class="p">(</span><span class="n">h5_pos_inds</span><span class="p">)</span>
<span class="n">spec_dim_names</span> <span class="o">=</span> <span class="n">px</span><span class="o">.</span><span class="n">hdf_utils</span><span class="o">.</span><span class="n">get_formatted_labels</span><span class="p">(</span><span class="n">h5_spec_inds</span><span class="p">)</span>

<span class="k">print</span><span class="p">(</span><span class="s1">&#39;Position dimensions are:&#39;</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">pos_dim_names</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">Spectroscopic dimensions are:&#39;</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">spec_dim_names</span><span class="p">)</span>
</pre></div>
</div>
<p class="sphx-glr-script-out">Out:</p>
<div class="sphx-glr-script-out highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Position</span> <span class="n">dimensions</span> <span class="n">are</span><span class="p">:</span>
<span class="p">[</span><span class="s1">&#39;X (m)&#39;</span><span class="p">,</span> <span class="s1">&#39;Y (m)&#39;</span><span class="p">]</span>

<span class="n">Spectroscopic</span> <span class="n">dimensions</span> <span class="n">are</span><span class="p">:</span>
<span class="p">[</span><span class="s1">&#39;Frequency (Hz)&#39;</span><span class="p">,</span> <span class="s1">&#39;DC_Offset (V)&#39;</span><span class="p">,</span> <span class="s1">&#39;Field ()&#39;</span><span class="p">,</span> <span class="s1">&#39;Cycle ()&#39;</span><span class="p">]</span>
</pre></div>
</div>
<p>As mentioned above, this is indeed a six dimensional dataset with two position dimensions and four spectroscopic
dimensions. The <code class="docutils literal notranslate"><span class="pre">Field</span></code> and <code class="docutils literal notranslate"><span class="pre">Cycle</span></code> dimensions do not have any units since they are dimensionless unlike the other
dimensions.</p>
</div>
<div class="section" id="get-dimensionality">
<h2>get_dimensionality()<a class="headerlink" href="#get-dimensionality" title="Permalink to this headline">¶</a></h2>
<p>Now lets find out the number of steps in each of those dimensions using another handy function called
<code class="docutils literal notranslate"><span class="pre">get_dimensionality()</span></code>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">pos_dim_sizes</span> <span class="o">=</span> <span class="n">px</span><span class="o">.</span><span class="n">hdf_utils</span><span class="o">.</span><span class="n">get_dimensionality</span><span class="p">(</span><span class="n">h5_pos_inds</span><span class="p">)</span>
<span class="n">spec_dim_sizes</span> <span class="o">=</span> <span class="n">px</span><span class="o">.</span><span class="n">hdf_utils</span><span class="o">.</span><span class="n">get_dimensionality</span><span class="p">(</span><span class="n">h5_spec_inds</span><span class="p">)</span>

<span class="k">print</span><span class="p">(</span><span class="s1">&#39;Size of each Position dimension:&#39;</span><span class="p">)</span>
<span class="k">for</span> <span class="n">name</span><span class="p">,</span> <span class="n">length</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">pos_dim_names</span><span class="p">,</span> <span class="n">pos_dim_sizes</span><span class="p">):</span>
    <span class="k">print</span><span class="p">(</span><span class="s1">&#39;{} : {}&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">length</span><span class="p">))</span>
<span class="k">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">Size of each Spectroscopic dimension:&#39;</span><span class="p">)</span>
<span class="k">for</span> <span class="n">name</span><span class="p">,</span> <span class="n">length</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">spec_dim_names</span><span class="p">,</span> <span class="n">spec_dim_sizes</span><span class="p">):</span>
    <span class="k">print</span><span class="p">(</span><span class="s1">&#39;{} : {}&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">length</span><span class="p">))</span>
</pre></div>
</div>
<p class="sphx-glr-script-out">Out:</p>
<div class="sphx-glr-script-out highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Size</span> <span class="n">of</span> <span class="n">each</span> <span class="n">Position</span> <span class="n">dimension</span><span class="p">:</span>
<span class="n">X</span> <span class="p">(</span><span class="n">m</span><span class="p">)</span> <span class="p">:</span> <span class="mi">5</span>
<span class="n">Y</span> <span class="p">(</span><span class="n">m</span><span class="p">)</span> <span class="p">:</span> <span class="mi">5</span>

<span class="n">Size</span> <span class="n">of</span> <span class="n">each</span> <span class="n">Spectroscopic</span> <span class="n">dimension</span><span class="p">:</span>
<span class="n">Frequency</span> <span class="p">(</span><span class="n">Hz</span><span class="p">)</span> <span class="p">:</span> <span class="mi">87</span>
<span class="n">DC_Offset</span> <span class="p">(</span><span class="n">V</span><span class="p">)</span> <span class="p">:</span> <span class="mi">64</span>
<span class="n">Field</span> <span class="p">()</span> <span class="p">:</span> <span class="mi">2</span>
<span class="n">Cycle</span> <span class="p">()</span> <span class="p">:</span> <span class="mi">2</span>
</pre></div>
</div>
</div>
<div class="section" id="get-sort-order">
<h2>get_sort_order()<a class="headerlink" href="#get-sort-order" title="Permalink to this headline">¶</a></h2>
<p>In a few (rare) cases, the spectroscopic / position dimensions are not arranged in descending order of rate of change.
In other words, the dimensions in these ancillary matrices are not arranged from fastest-varying to slowest.
To account for such discrepancies, <code class="docutils literal notranslate"><span class="pre">hdf_utils</span></code> has a very handy function that goes through each of the columns or
rows in the ancillary indices matrices and finds the order in which these dimensions vary.</p>
<p>Below we illustrate an example of sorting the names of the spectroscopic dimensions from fastest to slowest in
the BEPS data file:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">spec_sort_order</span> <span class="o">=</span> <span class="n">px</span><span class="o">.</span><span class="n">hdf_utils</span><span class="o">.</span><span class="n">get_sort_order</span><span class="p">(</span><span class="n">h5_spec_inds</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s1">&#39;Rate of change of spectroscopic dimensions: {}&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">spec_sort_order</span><span class="p">))</span>
<span class="k">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">Spectroscopic dimensions arranged as is:&#39;</span><span class="p">)</span>
<span class="n">unsorted_spec_labels</span> <span class="o">=</span> <span class="n">px</span><span class="o">.</span><span class="n">hdf_utils</span><span class="o">.</span><span class="n">get_formatted_labels</span><span class="p">(</span><span class="n">h5_spec_inds</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">unsorted_spec_labels</span><span class="p">)</span>
<span class="n">sorted_spec_labels</span> <span class="o">=</span> <a href="https://docs.scipy.org/doc/numpy/reference/generated/numpy.array.html#numpy.array" title="View documentation for numpy.array"><span class="n">np</span><span class="o">.</span><span class="n">array</span></a><span class="p">(</span><span class="n">unsorted_spec_labels</span><span class="p">)[</span><a href="https://docs.scipy.org/doc/numpy/reference/generated/numpy.array.html#numpy.array" title="View documentation for numpy.array"><span class="n">np</span><span class="o">.</span><span class="n">array</span></a><span class="p">(</span><span class="n">spec_sort_order</span><span class="p">)]</span>
<span class="k">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">Spectroscopic dimensions arranged from fastest to slowest&#39;</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">sorted_spec_labels</span><span class="p">)</span>
</pre></div>
</div>
<p class="sphx-glr-script-out">Out:</p>
<div class="sphx-glr-script-out highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Rate</span> <span class="n">of</span> <span class="n">change</span> <span class="n">of</span> <span class="n">spectroscopic</span> <span class="n">dimensions</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span> <span class="mi">2</span> <span class="mi">1</span> <span class="mi">3</span><span class="p">]</span>

<span class="n">Spectroscopic</span> <span class="n">dimensions</span> <span class="n">arranged</span> <span class="k">as</span> <span class="ow">is</span><span class="p">:</span>
<span class="p">[</span><span class="s1">&#39;Frequency (Hz)&#39;</span><span class="p">,</span> <span class="s1">&#39;DC_Offset (V)&#39;</span><span class="p">,</span> <span class="s1">&#39;Field ()&#39;</span><span class="p">,</span> <span class="s1">&#39;Cycle ()&#39;</span><span class="p">]</span>

<span class="n">Spectroscopic</span> <span class="n">dimensions</span> <span class="n">arranged</span> <span class="kn">from</span> <span class="nn">fastest</span> <span class="n">to</span> <span class="n">slowest</span>
<span class="p">[</span><span class="s1">&#39;Frequency (Hz)&#39;</span> <span class="s1">&#39;Field ()&#39;</span> <span class="s1">&#39;DC_Offset (V)&#39;</span> <span class="s1">&#39;Cycle ()&#39;</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="section" id="get-unit-values">
<h2>get_unit_values()<a class="headerlink" href="#get-unit-values" title="Permalink to this headline">¶</a></h2>
<p>When visualizing the data it is essential to plot the data against appropriate values on the X, Y, or Z axes.
Recall that by definition that the values over which each dimension is varied, are repeated and tiled over the entire
position or spectroscopic dimension of the dataset. Thus, if we had just the bias waveform repeated over two cycles,
spectroscopic values would contain the bias waveform tiled twice and the cycle numbers repeated as many times as the
number of points in the bias waveform. Therefore, extracting the bias waveform or the cycle numbers from the ancillary
datasets is not trivial. This problem is especially challenging for multidimensional datasets such as the one under
consideration. Fortunately, <code class="docutils literal notranslate"><span class="pre">hdf_utils</span></code> has a very handy function for this as well:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">pos_unit_values</span> <span class="o">=</span> <span class="n">px</span><span class="o">.</span><span class="n">hdf_utils</span><span class="o">.</span><span class="n">get_unit_values</span><span class="p">(</span><span class="n">h5_pos_inds</span><span class="p">,</span> <span class="n">h5_pos_vals</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s1">&#39;Position unit values:&#39;</span><span class="p">)</span>
<span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">val</span> <span class="ow">in</span> <span class="n">pos_unit_values</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
    <span class="k">print</span><span class="p">(</span><span class="s1">&#39;{} : {}&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">val</span><span class="p">))</span>
<span class="n">spec_unit_values</span> <span class="o">=</span> <span class="n">px</span><span class="o">.</span><span class="n">hdf_utils</span><span class="o">.</span><span class="n">get_unit_values</span><span class="p">(</span><span class="n">h5_spec_inds</span><span class="p">,</span> <span class="n">h5_spec_vals</span><span class="p">)</span>
</pre></div>
</div>
<p class="sphx-glr-script-out">Out:</p>
<div class="sphx-glr-script-out highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Position</span> <span class="n">unit</span> <span class="n">values</span><span class="p">:</span>
<span class="n">X</span> <span class="p">:</span> <span class="p">[</span> <span class="mf">0.</span>  <span class="mf">1.</span>  <span class="mf">2.</span>  <span class="mf">3.</span>  <span class="mf">4.</span><span class="p">]</span>
<span class="n">Y</span> <span class="p">:</span> <span class="p">[</span> <span class="mf">0.</span>  <span class="mf">1.</span>  <span class="mf">2.</span>  <span class="mf">3.</span>  <span class="mf">4.</span><span class="p">]</span>
</pre></div>
</div>
<p>Since the spectroscopic dimensions are quite complicated, lets visualize the results from <code class="docutils literal notranslate"><span class="pre">get_unit_values()</span></code>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">fig</span><span class="p">,</span> <span class="n">axes</span> <span class="o">=</span> <a href="https://matplotlib.org/api/_as_gen/matplotlib.pyplot.subplots.html#matplotlib.pyplot.subplots" title="View documentation for matplotlib.pyplot.subplots"><span class="n">plt</span><span class="o">.</span><span class="n">subplots</span></a><span class="p">(</span><span class="n">ncols</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">nrows</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mf">6.5</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>
<span class="k">for</span> <span class="n">axis</span><span class="p">,</span> <span class="n">name</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">axes</span><span class="o">.</span><span class="n">flat</span><span class="p">,</span> <span class="n">spec_dim_names</span><span class="p">):</span>
    <span class="n">axis</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
    <span class="n">name</span><span class="p">,</span> <span class="n">units</span> <span class="o">=</span> <span class="n">name</span><span class="o">.</span><span class="n">split</span><span class="p">()</span>
    <span class="n">axis</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">spec_unit_values</span><span class="p">[</span><span class="n">name</span><span class="p">],</span> <span class="s1">&#39;o-&#39;</span><span class="p">)</span>

<span class="n">fig</span><span class="o">.</span><span class="n">suptitle</span><span class="p">(</span><span class="s1">&#39;Spectroscopic Dimensions&#39;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">16</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mf">1.05</span><span class="p">)</span>
<span class="n">fig</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
</pre></div>
</div>
<img alt="../_images/sphx_glr_plot_hdf_utils_read_0011.png" class="align-center" src="../_images/sphx_glr_plot_hdf_utils_read_0011.png" />
<div class="section" id="reshaping-data">
<h3>Reshaping Data<a class="headerlink" href="#reshaping-data" title="Permalink to this headline">¶</a></h3>
</div>
</div>
<div class="section" id="reshape-to-n-dims">
<h2>reshape_to_n_dims()<a class="headerlink" href="#reshape-to-n-dims" title="Permalink to this headline">¶</a></h2>
<p>Pycroscopy stores N dimensional datasets in a flattened 2D form of position x spectral values. It can become
challenging to retrieve the data in its original N-dimensional form, especially for multidimensional datasets such as
the one we are working on. Fortunately, all the information regarding the dimensionality of the dataset are contained
in the spectral and position ancillary datasets. <code class="docutils literal notranslate"><span class="pre">reshape_to_n_dims()</span></code> is a very useful function that can help
retrieve the N-dimensional form of the data using a simple function call:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">ndim_form</span><span class="p">,</span> <span class="n">success</span><span class="p">,</span> <span class="n">labels</span> <span class="o">=</span> <span class="n">px</span><span class="o">.</span><span class="n">hdf_utils</span><span class="o">.</span><span class="n">reshape_to_n_dims</span><span class="p">(</span><span class="n">h5_raw</span><span class="p">,</span> <span class="n">get_labels</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="k">if</span> <span class="n">success</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="s1">&#39;Succeeded in reshaping flattened 2D dataset to N dimensions&#39;</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="s1">&#39;Shape of the data in its original 2D form&#39;</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">h5_raw</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="s1">&#39;Shape of the N dimensional form of the dataset:&#39;</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">ndim_form</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="s1">&#39;And these are the dimensions&#39;</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">labels</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="s1">&#39;Failed in reshaping the dataset&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p class="sphx-glr-script-out">Out:</p>
<div class="sphx-glr-script-out highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Succeeded</span> <span class="ow">in</span> <span class="n">reshaping</span> <span class="n">flattened</span> <span class="mi">2</span><span class="n">D</span> <span class="n">dataset</span> <span class="n">to</span> <span class="n">N</span> <span class="n">dimensions</span>
<span class="n">Shape</span> <span class="n">of</span> <span class="n">the</span> <span class="n">data</span> <span class="ow">in</span> <span class="n">its</span> <span class="n">original</span> <span class="mi">2</span><span class="n">D</span> <span class="n">form</span>
<span class="p">(</span><span class="mi">25</span><span class="p">,</span> <span class="mi">22272</span><span class="p">)</span>
<span class="n">Shape</span> <span class="n">of</span> <span class="n">the</span> <span class="n">N</span> <span class="n">dimensional</span> <span class="n">form</span> <span class="n">of</span> <span class="n">the</span> <span class="n">dataset</span><span class="p">:</span>
<span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">87</span><span class="p">,</span> <span class="mi">64</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="n">And</span> <span class="n">these</span> <span class="n">are</span> <span class="n">the</span> <span class="n">dimensions</span>
<span class="p">[</span><span class="s1">&#39;X&#39;</span> <span class="s1">&#39;Y&#39;</span> <span class="s1">&#39;Frequency&#39;</span> <span class="s1">&#39;DC_Offset&#39;</span> <span class="s1">&#39;Field&#39;</span> <span class="s1">&#39;Cycle&#39;</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="section" id="reshape-from-n-dims">
<h2>reshape_from_n_dims()<a class="headerlink" href="#reshape-from-n-dims" title="Permalink to this headline">¶</a></h2>
<p>The inverse problem of reshaping an N dimensional dataset back to a 2D dataset (let’s say for the purposes of
multivariate analysis or storing into Pycroscopy formatted HDF5 files) is also easily solved using another handy
function - <code class="docutils literal notranslate"><span class="pre">reshape_from_n_dims()</span></code>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">two_dim_form</span><span class="p">,</span> <span class="n">success</span> <span class="o">=</span> <span class="n">px</span><span class="o">.</span><span class="n">hdf_utils</span><span class="o">.</span><span class="n">reshape_from_n_dims</span><span class="p">(</span><span class="n">ndim_form</span><span class="p">,</span> <span class="n">h5_pos</span><span class="o">=</span><span class="n">h5_pos_inds</span><span class="p">,</span> <span class="n">h5_spec</span><span class="o">=</span><span class="n">h5_spec_inds</span><span class="p">)</span>
<span class="k">if</span> <span class="n">success</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="s1">&#39;Shape of flattened two dimensional form&#39;</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">two_dim_form</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="s1">&#39;Failed in flattening the N dimensional dataset&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p class="sphx-glr-script-out">Out:</p>
<div class="sphx-glr-script-out highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Shape</span> <span class="n">of</span> <span class="n">flattened</span> <span class="n">two</span> <span class="n">dimensional</span> <span class="n">form</span>
<span class="p">(</span><span class="mi">25</span><span class="p">,</span> <span class="mi">22272</span><span class="p">)</span>
</pre></div>
</div>
<p>Close and delete the h5_file</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">h5_f</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
<span class="n">os</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">h5_path</span><span class="p">)</span>
</pre></div>
</div>
<p><strong>Total running time of the script:</strong> ( 0 minutes  0.878 seconds)</p>
<div class="sphx-glr-footer docutils container">
<div class="sphx-glr-download docutils container">
<a class="reference download internal" href="../_downloads/plot_hdf_utils_read1.py" download=""><code class="xref download docutils literal notranslate"><span class="pre">Download</span> <span class="pre">Python</span> <span class="pre">source</span> <span class="pre">code:</span> <span class="pre">plot_hdf_utils_read.py</span></code></a></div>
<div class="sphx-glr-download docutils container">
<a class="reference download internal" href="../_downloads/plot_hdf_utils_read1.ipynb" download=""><code class="xref download docutils literal notranslate"><span class="pre">Download</span> <span class="pre">Jupyter</span> <span class="pre">notebook:</span> <span class="pre">plot_hdf_utils_read.ipynb</span></code></a></div>
</div>
<p class="sphx-glr-signature"><a class="reference external" href="https://sphinx-gallery.readthedocs.io">Gallery generated by Sphinx-Gallery</a></p>
</div>
</div>


           </div>
           
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2016, Suhas Somnath, Chris Smith, Stephen Jesse, Numan Laanait.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'0.60.0',
            LANGUAGE:'None',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>